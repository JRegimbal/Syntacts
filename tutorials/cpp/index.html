<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>C++ API | Syntacts</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="C++ API" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/tutorials/cpp/" />
<meta property="og:url" content="http://localhost:4000/tutorials/cpp/" />
<meta property="og:site_name" content="Syntacts" />
<script type="application/ld+json">
{"@type":"WebPage","headline":"C++ API","url":"http://localhost:4000/tutorials/cpp/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Syntacts" /></head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Syntacts</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/tutorials/">Tutorials</a><a class="page-link" href="/hardware/">Hardware</a><a class="page-link" href="/faq/">FAQ</a><a class="page-link" href="https://github.com/mahilab/Syntacts" target="_blank">Github</a>
          <a class="page-link" href="https://github.com/mahilab/Syntacts/releases" target="_blank">Download</a>
        </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">C++ API</h1>
  </header>

  <div class="post-content">
    <h2 id="introduction">Introduction</h2>

<p>This tutorial will teach you how to setup and use the Syntacts C++ API. 
You should have first built and installed the Syntacts library to your system. 
For this tutorial we will use <a href="https://cmake.org/">CMake</a> to manage our project and build. 
However, the process should be similar if you are using an IDE such as Visual Studio or Xcode.</p>

<h2 id="requirements">Requirements</h2>

<ul>
  <li>C++ compiler</li>
  <li><a href="https://cmake.org/">CMake</a></li>
</ul>

<h2 id="basic-setup">Basic Setup</h2>

<ul>
  <li>If you haven’t already, <a href="building.md">build and install</a> Syntacts.</li>
  <li>Create an empty directory for your project.</li>
  <li>Create a new <code class="highlighter-rouge">CMakeLists.txt</code> build script with the following contents:</li>
</ul>

<div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># create a new CMake project</span>
<span class="nb">cmake_minimum_required</span><span class="p">(</span>VERSION 3.13.0<span class="p">)</span>
<span class="nb">project</span><span class="p">(</span>MySyntactsProject VERSION 1.0.0<span class="p">)</span>
<span class="c1"># find the installed Syntact libraries</span>
<span class="nb">find_package</span><span class="p">(</span>syntacts REQUIRED<span class="p">)</span>
<span class="c1"># create an executable from main.cpp and link it against Syntacts</span>
<span class="nb">add_executable</span><span class="p">(</span>myApp main.cpp<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>myApp syntacts<span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>Add a C++ source file <code class="highlighter-rouge">main.cpp</code> with the following contents:</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;syntacts&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">tact</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="k">const</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="n">Session</span> <span class="n">s</span><span class="p">;</span>
    <span class="n">s</span><span class="p">.</span><span class="n">open</span><span class="p">();</span>
    <span class="n">s</span><span class="p">.</span><span class="n">playAll</span><span class="p">(</span><span class="n">Sine</span><span class="p">(</span><span class="mi">440</span><span class="p">));</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="building">Building</h2>

<ul>
  <li>After you’ve created <code class="highlighter-rouge">CMakeLists.txt</code> and <code class="highlighter-rouge">main.cpp</code>, open Powershell (or Terminal) in the directory that contains those files.</li>
  <li>Make sure CMake is added to your system PATH.</li>
  <li>Run the following commands:</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>build                      <span class="c"># make out-of-source build folder</span>
<span class="nb">cd </span>build                         <span class="c"># change directory</span>
cmake ..                         <span class="c"># generate build files from our CMakeLists.txt file</span>
cmake <span class="nt">--build</span> <span class="nb">.</span> <span class="nt">--config</span> Release <span class="c"># build the project</span>
</code></pre></div></div>

<ul>
  <li>When the build completes, find the output file <code class="highlighter-rouge">myApp.exe</code> in the build folder and run it. You should hear a two second 440 Hz sine wave from your default speakers. If you have a tactor connected to your audio output, try changing the frequency to an appropriate value for the tactor (e.g. 150-250 Hz).</li>
</ul>

<h2 id="api-overview">API Overview</h2>

<h1 id="session">Session</h1>

<ul>
  <li>Using Syntacts begins with creating a <code class="highlighter-rouge">Session</code>, or an audio-context that manages communication with an output device.</li>
  <li>Devices available for opening can be enumerated and queried for information using a <code class="highlighter-rouge">Session</code>:</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Session</span> <span class="n">session</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">d</span> <span class="o">:</span> <span class="n">session</span><span class="p">.</span><span class="n">getAvailableDevices</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">auto</span><span class="o">&amp;</span> <span class="n">dev</span> <span class="o">=</span> <span class="n">d</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">dev</span><span class="p">.</span><span class="n">index</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">dev</span><span class="p">.</span><span class="n">name</span>  <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>Devices can be opened using the <code class="highlighter-rouge">open</code> function.</li>
  <li>The no-argument overload will open the system default audio device (usually the main speakers).</li>
  <li>Non-default devices can be opened by passing a device index argument or the device name and preferred API:</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// open default device</span>
<span class="n">session</span><span class="p">.</span><span class="n">open</span><span class="p">();</span>   
<span class="n">session</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>  
<span class="c1">// open device by index</span>
<span class="n">session</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="mi">22</span><span class="p">);</span> 
<span class="n">session</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>  
<span class="c1">// open device by name and preferred API</span>
<span class="n">session</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="s">"MOTU Pro Audio"</span><span class="p">,</span> <span class="n">API</span><span class="o">::</span><span class="n">ASIO</span><span class="p">);</span>
<span class="n">session</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</code></pre></div></div>

<ul>
  <li>Device indices represent the combination of a device and an API it supports. Therefore, one device may have multiple indices each with a different API.</li>
  <li>You can retrieve your device’s index and/or name by iterating as in the above example, or by opening the <a href="gui.md">Syntacts GUI</a> and viewing the information there.</li>
</ul>

<blockquote>
  <p><strong>Warning:</strong> Device indices are NOT persistent. They may change when devices are power cycled, plugged/unplugged, or when other devices are connected to the PC. If you need a persistent method of opening a device, use the <strong>name + API</strong> version of <code class="highlighter-rouge">open</code>.</p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>Relevant Header(s)</th>
      <th>Relevant Examples(s)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://github.com/mahilab/Syntacts/blob/master/include/Tact/Session.hpp">Session.hpp</a></td>
      <td><a href="https://github.com/mahilab/Syntacts/blob/master/examples/example_devices.cpp">example_devices.cpp</a></td>
    </tr>
  </tbody>
</table>

<h1 id="signals">Signals</h1>

<ul>
  <li>Vibration waveforms are represented by one or more Signals. You can create Signals of different behaviors and lengths.</li>
  <li>Sine, Square, Saw, and Triangle classes are available in Syntacts. These implement typical oscillators with normalized amplitude and infinite duration.</li>
  <li>Basic oscillators can be created by calling their constructors:</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Signal</span> <span class="n">sin</span> <span class="o">=</span> <span class="n">Sine</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>      <span class="c1">// 10 Hz Sine wave</span>
<span class="n">Signal</span> <span class="n">sqr</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="mi">250</span><span class="p">);</span>   <span class="c1">// 250 Hz Square wave</span>
<span class="n">Signal</span> <span class="n">saw</span> <span class="o">=</span> <span class="n">Saw</span><span class="p">(</span><span class="mi">175</span><span class="p">);</span>      <span class="c1">// 175 Hz Saw wave</span>
<span class="n">Signal</span> <span class="n">tri</span> <span class="o">=</span> <span class="n">Triangle</span><span class="p">(</span><span class="mi">440</span><span class="p">);</span> <span class="c1">// 440 Hz Triangle wave (audible and ok for speakers)</span>
</code></pre></div></div>

<ul>
  <li>Oscillators alone have an <em>infinite</em> duration or length and a constant amplitude.</li>
  <li>You can use the Envelope, ASR, and ADSR (Attack, (Decay), Sustain, Release) Signals to define amplitude modifiers with <em>finite</em> duration:</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// This is a basic envelope that specifies amplitude (0.9), and duration (0.5 sec)</span>
<span class="n">Signal</span> <span class="n">bas</span> <span class="o">=</span> <span class="n">Envelope</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
<span class="c1">// This is an attack (0.1 sec), sustain (0.1 sec), release (0.1 sec) envelope. The sustain amplitude is 1.0. </span>
<span class="c1">// Envelopes can interpolate between amplitudes with different curves.</span>
<span class="c1">// This example uses smoothstep interpolation (sigmoid) for the attack and linear interoplation for release. </span>
<span class="n">Signal</span> <span class="n">asr</span> <span class="o">=</span> <span class="n">ASR</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">Curves</span><span class="o">::</span><span class="n">Smootheststep</span><span class="p">(),</span> <span class="n">Curves</span><span class="o">::</span><span class="n">Linear</span><span class="p">());</span>
</code></pre></div></div>

<ul>
  <li>Signals can be mixed using basic arithmetic. Multiplying and adding Signals can be thought of as an element-wise operation between two vectors.
    <ul>
      <li>Multiplying two Signals creates a new Signal of duration equal to the    shortest operand.</li>
      <li>Adding two Signals creates a new Signal of duration equal to the longest operand.</li>
    </ul>
  </li>
  <li>Gain and bias can also be applied to Signals with scalar operands.</li>
  <li>Below are basic examples of mixing the Signals from above:</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Signal</span> <span class="n">sig1</span> <span class="o">=</span> <span class="n">sqr</span> <span class="o">*</span> <span class="n">sin</span><span class="p">;</span>  <span class="c1">// duration is infinite</span>
<span class="n">Signal</span> <span class="n">sig2</span> <span class="o">=</span> <span class="n">sig1</span> <span class="o">*</span> <span class="n">asr</span><span class="p">;</span> <span class="c1">// duration is 0.3 seconds</span>
<span class="n">Signal</span> <span class="n">sig3</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">sqr</span> <span class="o">+</span> <span class="n">sin</span><span class="p">)</span> <span class="o">*</span> <span class="n">asr</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>
    <p>Signals created in the above examples:
<img src="https://raw.githubusercontent.com/wiki/mahilab/Syntacts/images/sigs.png" alt="Signals" /></p>
  </li>
  <li>
    <p>Complete signals can be made and mixed in-place as well.</p>
  </li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 250 Hz square wave amplitude modulated with a 20 Hz sine wave and ASR envelope.</span>
<span class="n">Signal</span> <span class="n">sig4</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="mi">250</span><span class="p">)</span> <span class="o">*</span> <span class="nf">Sine</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">*</span> <span class="n">ASR</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
</code></pre></div></div>

<ul>
  <li>Once you have created a complete Signal, it can be played on the Session.</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">session</span><span class="p">.</span><span class="n">play</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sig1</span><span class="p">);</span> <span class="c1">// plays sig 1 on channel 0</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>              <span class="c1">// sig1 plays for 3 seconds</span>
<span class="n">session</span><span class="p">.</span><span class="n">stop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>        <span class="c1">// stop sig1</span>

<span class="n">session</span><span class="p">.</span><span class="n">play</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">sig2</span><span class="p">);</span> <span class="c1">// plays sig2 on channel 1</span>
<span class="n">sleep</span><span class="p">(</span><span class="n">sig2</span><span class="p">.</span><span class="n">length</span><span class="p">());</span>  <span class="c1">// sig2 plays for its length of 0.3 seconds</span>
                       <span class="c1">// Do not need to stop sig2 because it is finite</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note:</strong> If you want to evaluate Syntacts without tactor hardware, make sure the frequency is high enough to be audible for speakers (e.g. 440 Hz). Low frequencies can potentially damage speakers! For this reason, most of the Syntacts examples are coded with frequencies in the hearing range. If you are actually outputting to a tactor, use frequencies appropriate for it (e.g. 150-250 Hz).</p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>Relevant Header(s)</th>
      <th>Relevant Examples(s)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://github.com/mahilab/Syntacts/blob/master/include/Tact/Signal.hpp">Signal.hpp</a>, <a href="https://github.com/mahilab/Syntacts/blob/master/include/Tact/Oscillator.hpp">Oscillator.hpp</a>, <a href="https://github.com/mahilab/Syntacts/blob/master/include/Tact/Envelope.hpp">Envelope.hpp</a>, <a href="https://github.com/mahilab/Syntacts/blob/master/include/Tact/General.hpp">General.hpp</a></td>
      <td><a href="https://github.com/mahilab/Syntacts/blob/master/examples/example_signals.cpp">example_signals.cpp</a></td>
    </tr>
  </tbody>
</table>

<h1 id="sequences">Sequences</h1>

<ul>
  <li>Multiple Signals can be ordered in time using Sequences.</li>
  <li>You can concatenate Signals using the insertion, or left-shift, operator <code class="highlighter-rouge">&lt;&lt;</code>.</li>
  <li>Delay and pause are achieved through the insertion of positive scalar operands.</li>
  <li>Negative scalar operands move the insertion points backwards in time, allowing for the overlay or fading of Signals into each other.</li>
  <li>Below is a basic example of creating Sequences:</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Signal</span> <span class="n">sigA</span> <span class="o">=</span> <span class="n">Sine</span><span class="p">(</span><span class="mi">440</span><span class="p">)</span> <span class="o">*</span> <span class="nf">ASR</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>      <span class="c1">// create 3 second Signal</span>
<span class="n">Signal</span> <span class="n">sigB</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="mi">440</span><span class="p">)</span> <span class="o">*</span> <span class="nf">ADSR</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// create 4 second Signal</span>

<span class="c1">// 7 second Sequence with sigA before sigB</span>
<span class="n">Sequence</span> <span class="n">sig4</span> <span class="o">=</span> <span class="n">sigA</span> <span class="o">&lt;&lt;</span> <span class="n">sigB</span><span class="p">;</span> 
<span class="c1">// 1 sec delay and 2 sec pause, 10 sec Sequence</span>
<span class="n">Sequence</span> <span class="n">sig5</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">sigA</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span> <span class="o">&lt;&lt;</span> <span class="n">sigB</span><span class="p">;</span> 
<span class="c1">// 1 sec fade/overlay between sigA and sigB, 6 sec sequence</span>
<span class="n">Sequence</span> <span class="n">sig6</span> <span class="o">=</span> <span class="n">sigA</span> <span class="o">&lt;&lt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">sigB</span><span class="p">;</span> 
</code></pre></div></div>

<ul>
  <li>
    <p>Sequenced signals created above:
<img src="https://raw.githubusercontent.com/wiki/mahilab/Syntacts/images/seq.png" alt="Sequences" /></p>
  </li>
  <li>
    <p>Sequences can also be concatenated:</p>
  </li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Sequence of sig4, sig5, and sig6. Note this will also modify sig4.</span>
<span class="n">Sequence</span> <span class="n">sig7</span> <span class="o">=</span> <span class="n">sig4</span> <span class="o">&lt;&lt;</span> <span class="n">sig5</span> <span class="o">&lt;&lt;</span> <span class="n">sig6</span><span class="p">;</span> 
<span class="c1">// Play sig7 on channel 0 for its length of 23 seconds</span>
<span class="n">session</span><span class="p">.</span><span class="n">play</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sig7</span><span class="p">);</span>
<span class="n">sleep</span><span class="p">(</span><span class="n">sig7</span><span class="p">.</span><span class="n">length</span><span class="p">());</span>
</code></pre></div></div>

<ul>
  <li>You can also insert Signals into an existing Sequence timeline:</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// insert 1 s of noise starts at the 4 second mark of sig5</span>
<span class="n">sig5</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Noise</span><span class="p">()</span> <span class="o">*</span> <span class="nf">Envelope</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="mi">4</span><span class="p">);</span> 
<span class="c1">// play sig5 on channel 0</span>
<span class="n">session</span><span class="p">.</span><span class="n">play</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sig5</span><span class="p">);</span> 
<span class="n">sleep</span><span class="p">(</span><span class="n">sig5</span><span class="p">.</span><span class="n">length</span><span class="p">())</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Relevant Header(s)</th>
      <th>Relevant Examples(s)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://github.com/mahilab/Syntacts/blob/master/include/Tact/Sequence.hpp">Sequence.hpp</a></td>
      <td><a href="https://github.com/mahilab/Syntacts/blob/master/examples/example_sequences.cpp">example_sequences.cpp</a></td>
    </tr>
  </tbody>
</table>

<h1 id="spatializers">Spatializers</h1>

<ul>
  <li>Spatializers map multiple channels to a normalized (0 to 1) continuous 1D or 2D spatial representation.</li>
  <li>For example, you can configure a virtual grid to match the physical layout of a tactor array.</li>
  <li>You can then set a virtual target coordinate and radius to play and blend multiple tactors at once.</li>
  <li>Only channels within a target radius are played.</li>
  <li>The volume of channels is interpolated according to a specified roll-off law (ie. linear, logarithmic, etc.) based on their proximity to the target location using. The roll-off law can be changed with <code class="highlighter-rouge">setRollOff</code>.</li>
  <li>Below is an example of creating a spatializer:</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Spatializer</span> <span class="nf">spatial</span><span class="p">(</span><span class="o">&amp;</span><span class="n">session</span><span class="p">);</span>        <span class="c1">// create 2D Spatializer</span>

<span class="n">spatial</span><span class="p">.</span><span class="n">createGrid</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">);</span>              <span class="c1">// Grid of 4 rows x 6 cols</span>
<span class="n">spatial</span><span class="p">.</span><span class="n">setPosition</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.8</span><span class="p">);</span>      <span class="c1">// move channel 18 by x = 0.1, y = 0.8</span>
<span class="n">spatial</span><span class="p">.</span><span class="n">setRadius</span><span class="p">(</span><span class="mf">0.3</span><span class="p">);</span>               <span class="c1">// effect radius</span>
<span class="n">spatial</span><span class="p">.</span><span class="n">setRollOff</span><span class="p">(</span><span class="n">Curves</span><span class="o">::</span><span class="n">Linear</span><span class="p">());</span> <span class="c1">// set roll off method</span>
<span class="n">spatial</span><span class="p">.</span><span class="n">setTarget</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">);</span>          <span class="c1">// target location</span>
<span class="n">spatial</span><span class="p">.</span><span class="n">play</span><span class="p">(</span><span class="n">sig1</span><span class="p">);</span>                   <span class="c1">// play Signal</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>                             <span class="c1">// wait 3 seconds while the Signal plays</span>
</code></pre></div></div>

<ul>
  <li>To create sweeping motions with tactile arrays, you can move the target location in a <code class="highlighter-rouge">while</code> or <code class="highlighter-rouge">for</code> loop along a predescribed path.</li>
  <li>Master volume and pitch of the Spatializer can also be modified using <code class="highlighter-rouge">setVolume</code> and <code class="highlighter-rouge">setPitch</code>.</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">spatial</span><span class="p">.</span><span class="n">setTarget</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">);</span> 
    <span class="n">spatial</span><span class="p">.</span><span class="n">setVolume</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
    <span class="n">spatial</span><span class="p">.</span><span class="n">setPitch</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>
    <p>The Spatializer created in the examples above:
<img src="https://raw.githubusercontent.com/wiki/mahilab/Syntacts/images/spatial.png" alt="Spatializers" /></p>
  </li>
  <li>Channel positions can be set as uniform grids (as above) or individually using <code class="highlighter-rouge">setPosition</code>.</li>
  <li>Below is an example of custom channel positioning:</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">chs</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">getChannelCount</span><span class="p">();</span>
<span class="c1">// set up position of channels, evenly distributed</span>
<span class="kt">double</span> <span class="n">spc</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="n">chs</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">chs</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
    <span class="n">spatial</span><span class="p">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="n">spc</span><span class="p">);</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Relevant Header(s)</th>
      <th>Relevant Examples(s)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://github.com/mahilab/Syntacts/blob/master/include/Tact/Spatializer.hpp">Spatializer.hpp</a></td>
      <td><a href="https://github.com/mahilab/Syntacts/blob/master/examples/example_spatializer.cpp">example_spatializer.cpp</a></td>
    </tr>
  </tbody>
</table>

<h1 id="library">Library</h1>

<ul>
  <li>Signals can be saved to a disk and reloaded at a later time using Library.</li>
  <li>In Syntacts, the default file format is a binary representation of the serialized Signal.
    <ul>
      <li>This saves only the parameters needed to reconstruct the Signal at runtime instead of saving all individual audio samples.</li>
      <li>Using this format creates smaller files which can be loaded more quickly on the fly than other audio file formats.</li>
    </ul>
  </li>
  <li>To save and import in the default location (i.e. APPDATA/Syntacts/Library), use the functions <code class="highlighter-rouge">saveSignal</code> and <code class="highlighter-rouge">loadSignal</code>:</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Make a Signal to save/export, and a blank Signal to import in to</span>
<span class="n">Signal</span> <span class="n">out</span> <span class="o">=</span> <span class="n">Sine</span><span class="p">(</span><span class="mi">440</span><span class="p">)</span> <span class="o">*</span> <span class="nf">ASR</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="n">Signal</span> <span class="n">in</span><span class="p">;</span>

<span class="c1">// Syntacts Binary Format (Default Location, i.e. APPDATA/Syntacts/Library)</span>
<span class="n">Library</span><span class="o">::</span><span class="n">saveSignal</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="s">"out"</span><span class="p">);</span> <span class="c1">// file name is in quotation marks</span>
<span class="n">Library</span><span class="o">::</span><span class="n">loadSignal</span><span class="p">(</span><span class="n">in</span><span class="p">,</span> <span class="s">"out"</span><span class="p">);</span>
</code></pre></div></div>

<ul>
  <li>Signals can be saved and imported in other file locations using the functions <code class="highlighter-rouge">exportSignal</code> and <code class="highlighter-rouge">importSignal</code>.</li>
  <li>You can customize the file location by specifying the file path. This is changed using quotation marks: <code class="highlighter-rouge">"file path"</code>.</li>
  <li>Files can be saved with a relative or absolute path:</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Binary format saved in a custom location</span>
<span class="c1">// Export/import with a relative path</span>
<span class="n">Library</span><span class="o">::</span><span class="n">exportSignal</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="s">"relative/folder/out.sig"</span><span class="p">);</span>
<span class="n">Library</span><span class="o">::</span><span class="n">importSignal</span><span class="p">(</span><span class="n">in</span><span class="p">,</span> <span class="s">"relative/folder/out.sig"</span><span class="p">);</span>

<span class="c1">// Export/import with an absolute path</span>
<span class="n">Library</span><span class="o">::</span><span class="n">exportSignal</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="s">"/absolute/folder/out.sig"</span><span class="p">));</span>
<span class="n">Library</span><span class="o">::</span><span class="n">importSignal</span><span class="p">(</span><span class="n">in</span><span class="p">,</span> <span class="s">"/absolute/folder/out.sig"</span><span class="p">));</span>
</code></pre></div></div>

<ul>
  <li>Syntacts can also export and import JSON, WAV, and AIFF file formats to use with existing haptic libraries. CSV and TXT files can only be exported.</li>
  <li>To use the above file formats, simply change the file format in your path to your desired file type:</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// JSON format</span>
<span class="n">Library</span><span class="o">::</span><span class="n">exportSignal</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="s">"folder/out.json"</span><span class="p">));</span>
<span class="n">Library</span><span class="o">::</span><span class="n">importSignal</span><span class="p">(</span><span class="n">in</span><span class="p">,</span> <span class="s">"folder/out.json"</span><span class="p">));</span>

<span class="c1">// WAV format - can use .wav, .WAV, or .wave</span>
<span class="n">Library</span><span class="o">::</span><span class="n">exportSignal</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="s">"folder/out.wav"</span><span class="p">));</span>
<span class="n">Library</span><span class="o">::</span><span class="n">importSignal</span><span class="p">(</span><span class="n">in</span><span class="p">,</span> <span class="s">"folder/out.wav"</span><span class="p">));</span>

<span class="c1">// AIFF format - can use .aiff, .AIFF, or .aifc</span>
<span class="n">Library</span><span class="o">::</span><span class="n">exportSignal</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="s">"folder/out.aiff"</span><span class="p">));</span>
<span class="n">Library</span><span class="o">::</span><span class="n">importSignal</span><span class="p">(</span><span class="n">in</span><span class="p">,</span> <span class="s">"folder/out.aiff"</span><span class="p">));</span>

<span class="c1">// CSV format (import not yet supported)</span>
<span class="n">Library</span><span class="o">::</span><span class="n">exportSignal</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="s">"folder/out.csv"</span><span class="p">));</span>

<span class="c1">// TXT format (import not yet supported)</span>
<span class="n">Library</span><span class="o">::</span><span class="n">exportSignal</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="s">"folder/out.txt"</span><span class="p">));</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Relevant Header(s)</th>
      <th>Relevant Examples(s)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://github.com/mahilab/Syntacts/blob/master/include/Tact/Library.hpp">Library.hpp</a></td>
      <td><a href="https://github.com/mahilab/Syntacts/blob/master/examples/example_library.cpp">example_library.cpp</a></td>
    </tr>
  </tbody>
</table>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>
  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p>Syntacts | The Tactor Synthesizer</p>
        <a href="https://mahilab.rice.edu" target="_blank">Mechatronics and Haptic Interfaces Lab</a>
      </div>
    </div>
  </div>
</footer>
</body>

</html>
