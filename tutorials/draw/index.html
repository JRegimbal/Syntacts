<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Syntacts Draw Example Project | Syntacts</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Syntacts Draw Example Project" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/tutorials/draw/" />
<meta property="og:url" content="http://localhost:4000/tutorials/draw/" />
<meta property="og:site_name" content="Syntacts" />
<script type="application/ld+json">
{"@type":"WebPage","headline":"Syntacts Draw Example Project","url":"http://localhost:4000/tutorials/draw/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Syntacts" /></head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Syntacts</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/tutorials/">Tutorials</a><a class="page-link" href="/hardware/">Hardware</a><a class="page-link" href="/faq/">FAQ</a><a class="page-link" href="https://github.com/mahilab/Syntacts" target="_blank">Github</a>
          <a class="page-link" href="https://github.com/mahilab/Syntacts/releases" target="_blank">Download</a>
        </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Syntacts Draw Example Project</h1>
  </header>

  <div class="post-content">
    <h2 id="introduction">Introduction</h2>

<p>In this tutorial, we will create a GUI interface that allows us to “draw” 2D tactile animations on the 24-tactor <a href="/hardware">Syntacts Array</a>. We will leverage Syntact’s Spatializer to blend the amplitudes of adjacent tactors so that we can create the illusion of continuous motion. The program will be written in C++ using the <a href="https://github.com/mahilab/mahi-gui">mahi-gui</a> library. You should already have a decent understanding of C++ and completed the <a href="/tutorials/cpp/">C++ API tutorial</a>. The Syntacts Array is driven by a MOTU 24Ao audio interface. Even if you don’t have a MOTU 24Ao or the Array, this tutorial is still a good example of creating user interfaces around Syntacts. Completed code is <a href="https://github.com/mahilab/SyntactsDraw">available on GitHub</a>.</p>

<p><img src="https://raw.githubusercontent.com/wiki/mahilab/Syntacts/images/tut-draw/draw.gif" alt="GUI" /></p>

<h2 id="requirements">Requirements</h2>

<ul>
  <li>C++17 compiler</li>
  <li><a href="https://cmake.org/">CMake</a></li>
  <li><a href="https://motu.com/products/avb/24ai-24ao">MOTU 24Ao</a> audio interface</li>
  <li>assembled <a href="/hardware">Syntacts Array</a></li>
  <li>three Syntacts <a href="/hardware">v1.x amplifiers</a></li>
</ul>

<h2 id="setting-up-with-cmake">Setting Up with CMake</h2>

<p>We will use CMake as our build system. Our build script, <code class="highlighter-rouge">CMakeLists.txt</code>, is given below. Using <code class="highlighter-rouge">FetchContent</code>, we can automatically retrieve mahi-gui and Syntacts from their GitHub repositories and build them as a part of our application. Finally, we will make an executable from a source file named <code class="highlighter-rouge">draw.cpp</code>, and link it to mahi-gui and Syntacts.</p>

<div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># CMakeLists.txt</span>
<span class="nb">cmake_minimum_required</span><span class="p">(</span>VERSION 3.7<span class="p">)</span>
<span class="nb">project</span><span class="p">(</span>SyntactsDraw VERSION 0.1.0 LANGUAGES CXX<span class="p">)</span>
<span class="nb">include</span><span class="p">(</span>FetchContent<span class="p">)</span> 

<span class="c1"># fetch mahi-gui</span>
<span class="nf">FetchContent_Declare</span><span class="p">(</span>mahi-gui GIT_REPOSITORY https://github.com/mahilab/mahi-gui.git<span class="p">)</span> 
<span class="nf">FetchContent_MakeAvailable</span><span class="p">(</span>mahi-gui<span class="p">)</span>

<span class="c1"># fetch syntacts (could also use find_package if installed)</span>
<span class="nb">set</span><span class="p">(</span>SYNTACTS_BUILD_GUI OFF CACHE BOOL <span class="s2">""</span> FORCE<span class="p">)</span>
<span class="nb">set</span><span class="p">(</span>SYNTACTS_BUILD_C_DLL OFF CACHE BOOL <span class="s2">""</span> FORCE<span class="p">)</span>
<span class="nb">set</span><span class="p">(</span>SYNTACTS_BUILD_EXAMPLES OFF CACHE BOOL <span class="s2">""</span> FORCE<span class="p">)</span>
<span class="nb">set</span><span class="p">(</span>SYNTACTS_BUILD_TESTS OFF CACHE BOOL <span class="s2">""</span> FORCE<span class="p">)</span>
<span class="nf">FetchContent_Declare</span><span class="p">(</span>syntacts GIT_REPOSITORY https://github.com/mahilab/Syntacts.git<span class="p">)</span>
<span class="nf">FetchContent_MakeAvailable</span><span class="p">(</span>syntacts<span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span>draw draw.cpp<span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span>draw mahi::gui syntacts<span class="p">)</span>
</code></pre></div></div>

<h2 id="making-an-application-window">Making an Application Window</h2>

<p>First, we create our source file <code class="highlighter-rouge">draw.cpp</code> in the same directory as <code class="highlighter-rouge">CMakeLists.txt</code>. We begin by including all the necessary library headers and using declarations, and defining a few constants:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// draw.cpp</span>
<span class="cp">#include &lt;syntacts&gt;
#include &lt;Mahi/Gui.hpp&gt;
#include &lt;Mahi/Util.hpp&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">tact</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">mahi</span><span class="o">::</span><span class="n">gui</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">mahi</span><span class="o">::</span><span class="n">util</span><span class="p">;</span>

<span class="k">constexpr</span> <span class="kt">int</span> <span class="n">WIDTH</span>  <span class="o">=</span> <span class="mi">300</span><span class="p">;</span> <span class="c1">// window width</span>
<span class="k">constexpr</span> <span class="kt">int</span> <span class="n">HEIGHT</span> <span class="o">=</span> <span class="mi">865</span><span class="p">;</span> <span class="c1">// window height</span>

<span class="k">constexpr</span> <span class="kt">int</span> <span class="n">COLS</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>   <span class="c1">// array columns</span>
<span class="k">constexpr</span> <span class="kt">int</span> <span class="n">ROWS</span>   <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>   <span class="c1">// array rows</span>
</code></pre></div></div>

<p>Next, we will create a class <code class="highlighter-rouge">SyntactsDraw</code> which subclasses <code class="highlighter-rouge">Application</code> from mahi-gui. <code class="highlighter-rouge">Application</code> provides us with a window and OpenGL context. You don’t actually need to know anything about OpenGL for this tutorial, because we will be using <a href="https://github.com/ocornut/imgui">ImGui</a> to draw our widgets and 2D graphics. ImGui is an incredibly powerful, yet simple “immediate-mode” GUI library for C++ and is excellent for creating quick interfaces. mahi-gui comes pre-integrated with ImGui, so we can use it without any additional setup.</p>

<p>We need to call <code class="highlighter-rouge">Application</code>’s constructor from our class’s constructor to establish the window size and name. We will also go ahead and set a theme for ImGui, and disable ImGui Viewports (i.e. multi-window features) since we only need one window.</p>

<p>Next, we override <code class="highlighter-rouge">Application</code>’s <code class="highlighter-rouge">update</code> method. This function will be called every frame before the window is rendered. It is here that we will put our ImGui window code and application logic. The <em>ImGui window</em> is a separate concept from the <em>application window</em> (i.e. the window created by the operating system). It can be thought of as a window within a window. The ImGui window content starts at <code class="highlighter-rouge">ImGui::Begin</code> and ends with <code class="highlighter-rouge">ImGui::End</code>. All code in between these two functions will compose our user interface. We will set the window’s position and size so that it exactly matches the Application window size.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// Syntacts Array Drawing Application</span>
<span class="k">class</span> <span class="nc">SyntactsDraw</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Application</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="c1">/// Constructor</span>
    <span class="n">SyntactsDraw</span><span class="p">()</span> <span class="o">:</span> <span class="n">Application</span><span class="p">(</span><span class="n">WIDTH</span><span class="p">,</span><span class="n">HEIGHT</span><span class="p">,</span><span class="s">"SyntactsDraw"</span><span class="p">,</span><span class="nb">false</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// set ImGui theme and disable viewports (multi-window)</span>
        <span class="n">ImGui</span><span class="o">::</span><span class="n">StyleColorsMahiDark3</span><span class="p">();</span>
        <span class="n">ImGui</span><span class="o">::</span><span class="n">DisableViewports</span><span class="p">();</span>
    <span class="p">}</span>
<span class="nl">private:</span>
    <span class="c1">/// Called once per frame</span>
    <span class="kt">void</span> <span class="n">update</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="c1">// setup ImGui window</span>
        <span class="n">ImGui</span><span class="o">::</span><span class="n">SetNextWindowPos</span><span class="p">({</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span> <span class="n">ImGuiCond_Always</span><span class="p">);</span>
        <span class="n">ImGui</span><span class="o">::</span><span class="n">SetNextWindowSize</span><span class="p">({</span><span class="n">WIDTH</span><span class="p">,</span><span class="n">HEIGHT</span><span class="p">},</span> <span class="n">ImGuiCond_Always</span><span class="p">);</span>
        <span class="n">ImGuiWindowFlags</span> <span class="n">flags</span> <span class="o">=</span> <span class="n">ImGuiWindowFlags_NoMove</span> <span class="o">|</span> <span class="n">ImGuiWindowFlags_NoResize</span> <span class="o">|</span> <span class="n">ImGuiWindowFlags_NoTitleBar</span><span class="p">;</span>
        <span class="n">ImGui</span><span class="o">::</span><span class="n">Begin</span><span class="p">(</span><span class="s">"Syntacts Draw"</span><span class="p">,</span> <span class="nb">nullptr</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>

        <span class="c1">// ALL APPLICATION CODE TO GO HERE</span>

        <span class="n">ImGui</span><span class="o">::</span><span class="n">End</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Now that we have the skeleton of <code class="highlighter-rouge">SyntactsDraw</code> complete, we can create an instance in <code class="highlighter-rouge">main</code> and run it:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// main, program entry point</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="k">const</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
    <span class="n">SyntactsDraw</span> <span class="n">app</span><span class="p">;</span>
    <span class="n">app</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>At this point, we can build the program with CMake. Run the following commands from a shell in the directory that contains <code class="highlighter-rouge">CMakeLists.txt</code> and <code class="highlighter-rouge">draw.cpp</code>:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>build
<span class="nb">cd </span>build
cmake ..
cmake <span class="nt">--build</span> <span class="nb">.</span> <span class="nt">--config</span> Release
</code></pre></div></div>

<p>Allow the build process to complete (it may take a minute or two the first time, as mahi-gui and Syntacts are built). If everything goes correctly, you should have an application <code class="highlighter-rouge">draw.exe</code> located in the build output. Go ahead and run it. You should see a tall skinny window with nothing in it.</p>

<h2 id="fleshing-out-our-application">Fleshing Out Our Application</h2>

<p>Now let’s add some functionality to our program! First things first, we need to initialize a Syntacts <a href="https://www.syntacts.org/tutorials/cpp/#session">Session</a> and configure a <a href="https://www.syntacts.org/tutorials/cpp/#spatializers">Spatializer</a>. We will add both of these as member variables of our <code class="highlighter-rouge">SyntactsDraw</code> class (denoted with <code class="highlighter-rouge">m_</code> prefix). A new member function <code class="highlighter-rouge">initialize</code> will configure them and create the <a href="https://www.syntacts.org/tutorials/cpp/#signals">Signal</a> that we will play on the array (a simple 175 Hz sine wave):</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// Syntacts Session</span>
<span class="n">Session</span> <span class="n">m_session</span><span class="p">;</span>
<span class="c1">/// Syntacts Spatializer</span>
<span class="n">Spatializer</span> <span class="n">m_spat</span><span class="p">;</span>
<span class="c1">/// Spatializer radius</span>
<span class="kt">float</span> <span class="n">m_radius</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="c1">/// Syntacts Signal</span>
<span class="n">Signal</span> <span class="n">m_sig</span><span class="p">;</span>

<span class="c1">/// Initializes Syntacts Session and Spatializer</span>
<span class="kt">void</span> <span class="nf">initialize</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">m_session</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="s">"MOTU Pro Audio"</span><span class="p">,</span> <span class="n">API</span><span class="o">::</span><span class="n">ASIO</span><span class="p">)</span> <span class="o">!=</span> <span class="n">SyntactsError_NoError</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">LOG</span><span class="p">(</span><span class="n">Fatal</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">"Failed to open MOTU 24Ao! Ensure that the device is connected and that drivers are installed."</span><span class="p">;</span>        
        <span class="k">throw</span> <span class="n">std</span><span class="o">::</span><span class="n">runtime_error</span><span class="p">(</span><span class="s">"Failed to open MOTU 24Ao!"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">m_spat</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_session</span><span class="p">);</span>
    <span class="n">m_spat</span><span class="p">.</span><span class="n">setTarget</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">m_spat</span><span class="p">.</span><span class="n">setRadius</span><span class="p">(</span><span class="n">m_radius</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">COLS</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">ROWS</span><span class="p">;</span> <span class="o">++</span><span class="n">r</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">ch</span> <span class="o">=</span> <span class="n">c</span><span class="o">*</span><span class="n">ROWS</span> <span class="o">+</span> <span class="n">r</span><span class="p">;</span>
            <span class="n">m_spat</span><span class="p">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">ch</span><span class="p">,(</span><span class="kt">double</span><span class="p">)</span><span class="n">c</span><span class="p">,(</span><span class="kt">double</span><span class="p">)</span><span class="n">r</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">m_sig</span> <span class="o">=</span> <span class="n">Sine</span><span class="p">(</span><span class="mi">175</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Now we can add a button to our GUI code in <code class="highlighter-rouge">update</code> that will call the function if the Session is not open yet.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">Begin</span><span class="p">(</span><span class="s">"Syntacts Draw"</span><span class="p">,</span> <span class="nb">nullptr</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
<span class="c1">// // if Session not open, offer initialization button</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">m_session</span><span class="p">.</span><span class="n">isOpen</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="s">"Initialize Syntacts"</span><span class="p">,</span> <span class="n">ImVec2</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span>
        <span class="n">initialize</span><span class="p">();</span> 
<span class="p">}</span>
<span class="p">...</span>
</code></pre></div></div>

<p align="center">
    <img src="https://raw.githubusercontent.com/wiki/mahilab/Syntacts/images/tut-draw/button.gif" height="250" />
</p>

<p>Great! Now let’s get our hands dirty and write a function to draw our array graphics. To help us later on, will create two <code class="highlighter-rouge">Rects</code> to store the pixel coordinates of our array – one bounding the outer edge, and one bounding the tactors. Because we want to be fancy, we will use the Session method <code class="highlighter-rouge">getLevel</code> to color each tactor circle so that its Hot Pink at max level (i.e 1.0).</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// Pixel rect enclosing outer array</span>
<span class="n">Rect</span> <span class="n">m_arrayRect</span><span class="p">;</span>
<span class="c1">/// Pixel rect enclousing inner array</span>
<span class="n">Rect</span> <span class="n">m_tactorRect</span><span class="p">;</span>

<span class="c1">/// Draws the array background graphics</span>
<span class="kt">void</span> <span class="nf">drawArray</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">auto</span><span class="o">&amp;</span> <span class="n">dl</span>     <span class="o">=</span> <span class="o">*</span><span class="n">ImGui</span><span class="o">::</span><span class="n">GetWindowDrawList</span><span class="p">();</span>
    <span class="n">Vec2</span> <span class="n">cp</span>      <span class="o">=</span> <span class="n">ImGui</span><span class="o">::</span><span class="n">GetCursorPos</span><span class="p">();</span>
    <span class="n">Vec2</span> <span class="n">pad</span>     <span class="o">=</span> <span class="n">ImGui</span><span class="o">::</span><span class="n">GetStyle</span><span class="p">().</span><span class="n">WindowPadding</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">w</span>      <span class="o">=</span> <span class="n">WIDTH</span> <span class="o">-</span> <span class="n">pad</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">h</span>      <span class="o">=</span> <span class="n">ROWS</span> <span class="o">*</span> <span class="n">w</span> <span class="o">/</span> <span class="n">COLS</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">space</span>  <span class="o">=</span> <span class="n">w</span> <span class="o">/</span> <span class="n">COLS</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">radius</span> <span class="o">=</span> <span class="n">space</span> <span class="o">*</span> <span class="mf">0.25</span><span class="n">f</span><span class="p">;</span>
    <span class="n">m_arrayRect</span>  <span class="o">=</span> <span class="n">Rect</span><span class="p">(</span><span class="n">cp</span><span class="p">,</span> <span class="n">Vec2</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="n">h</span><span class="p">));</span>
    <span class="n">m_tactorRect</span> <span class="o">=</span> <span class="n">Rect</span><span class="p">(</span><span class="n">cp</span> <span class="o">+</span> <span class="n">Vec2</span><span class="p">(</span><span class="n">space</span><span class="p">,</span><span class="n">space</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">Vec2</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="n">h</span><span class="p">)</span> <span class="o">-</span> <span class="n">Vec2</span><span class="p">(</span><span class="n">space</span><span class="p">,</span><span class="n">space</span><span class="p">));</span>
    <span class="n">dl</span><span class="p">.</span><span class="n">AddRectFilled</span><span class="p">(</span><span class="n">m_arrayRect</span><span class="p">.</span><span class="n">tl</span><span class="p">(),</span> <span class="n">m_arrayRect</span><span class="p">.</span><span class="n">br</span><span class="p">(),</span> <span class="n">IM_COL32</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>
    <span class="n">dl</span><span class="p">.</span><span class="n">AddRect</span><span class="p">(</span><span class="n">m_arrayRect</span><span class="p">.</span><span class="n">tl</span><span class="p">(),</span> <span class="n">m_arrayRect</span><span class="p">.</span><span class="n">br</span><span class="p">(),</span> <span class="n">IM_COL32</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">128</span><span class="p">));</span>
    <span class="n">dl</span><span class="p">.</span><span class="n">AddRect</span><span class="p">(</span><span class="n">m_tactorRect</span><span class="p">.</span><span class="n">tl</span><span class="p">(),</span> <span class="n">m_tactorRect</span><span class="p">.</span><span class="n">br</span><span class="p">(),</span> <span class="n">IM_COL32</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span> <span class="mi">32</span><span class="p">));</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">COLS</span><span class="p">;</span> <span class="o">++</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">ROWS</span><span class="p">;</span> <span class="o">++</span><span class="n">r</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">ch</span>      <span class="o">=</span> <span class="n">c</span><span class="o">*</span><span class="n">ROWS</span> <span class="o">+</span> <span class="n">r</span><span class="p">;</span>
            <span class="kt">float</span> <span class="n">x</span>     <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">space</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">c</span> <span class="o">*</span> <span class="n">space</span><span class="p">;</span>
            <span class="kt">float</span> <span class="n">y</span>     <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">h</span> <span class="o">-</span> <span class="n">space</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">r</span> <span class="o">*</span> <span class="n">space</span><span class="p">;</span>
            <span class="kt">float</span> <span class="n">level</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">m_session</span><span class="p">.</span><span class="n">getLevel</span><span class="p">(</span><span class="n">ch</span><span class="p">);</span>
            <span class="n">Color</span> <span class="n">col</span>   <span class="o">=</span> <span class="n">Tween</span><span class="o">::</span><span class="n">Linear</span><span class="p">(</span><span class="n">Grays</span><span class="o">::</span><span class="n">Gray70</span><span class="p">,</span> <span class="n">Pinks</span><span class="o">::</span><span class="n">HotPink</span><span class="p">,</span> <span class="n">level</span><span class="p">);</span>
            <span class="n">dl</span><span class="p">.</span><span class="n">AddCircleFilled</span><span class="p">(</span><span class="n">Vec2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span><span class="n">radius</span><span class="p">,</span><span class="n">ImGui</span><span class="o">::</span><span class="n">ColorConvertFloat4ToU32</span><span class="p">(</span><span class="n">col</span><span class="p">),</span><span class="mi">32</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<p>We can call this from <code class="highlighter-rouge">update</code>, and see the result:</p>

<p align="center">
    <img src="https://raw.githubusercontent.com/wiki/mahilab/Syntacts/images/tut-draw/array.png" height="250" />
</p>

<p>Looking good, but so far we have only created a static background. Let’s add some interactivity. We will offer two modes of user interaction: one where the user can draw a series of paths and play them back on the array, and one where the array target position follows the mouse in realtime.</p>

<p>For the “playback” mode, we will define our paths as a vector of vectors of Vec2s. We will also add a few boolean flags so we know what mode we are in, as well as a variable to store the position of the Spatializer target position in pixels:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// User's paths</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">ImVec2</span><span class="o">&gt;&gt;</span> <span class="n">m_paths</span><span class="p">;</span>
<span class="c1">/// Are we playing back the user's path?</span>
<span class="kt">bool</span> <span class="n">m_playing</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="c1">/// Is mouse following mode enabled?</span>
<span class="kt">bool</span> <span class="n">m_followMode</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="c1">/// Pixel position of target</span>
<span class="n">Vec2</span> <span class="n">m_target_px</span><span class="p">;</span>
</code></pre></div></div>

<p>Back in our <code class="highlighter-rouge">update</code> method, we can add a few buttons and sliders to 1) play the path, 2) clear the path, 3) modify the target radius, and 4) toggle interaction modes. Additionally, we will allow the user to modify the target radius with mouse wheel scroll.</p>

<p>Our <em>Play</em> button will start a coroutine that plays back the user’s current set of paths (more on that later). The <em>Clear</em> button simply clears the vector of paths. Our <em>Radius</em> slider will modify the value of <code class="highlighter-rouge">m_radius</code>, and use it to update the target radius of <code class="highlighter-rouge">m_spat</code>. Similarly, we update the target radius if the mouse wheel value this frame is not zero. When the <em>Follow Mouse</em> checkbox is toggled, we will play or stop our Signal on the Spatializer.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">m_session</span><span class="p">.</span><span class="n">isOpen</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="s">"Initialize Syntacts"</span><span class="p">,</span> <span class="n">ImVec2</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span>
        <span class="n">initialize</span><span class="p">();</span> 
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
    <span class="c1">// controls to play and clear path</span>
    <span class="n">ImGui</span><span class="o">::</span><span class="n">BeginDisabled</span><span class="p">(</span><span class="n">m_followMode</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="s">"Play Paths"</span><span class="p">,</span> <span class="n">ImVec2</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">m_playing</span><span class="p">)</span>
        <span class="n">start_coroutine</span><span class="p">(</span><span class="n">playPaths</span><span class="p">());</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="s">"Clear Paths"</span><span class="p">,</span> <span class="n">ImVec2</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)))</span>
        <span class="n">m_paths</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
    <span class="n">ImGui</span><span class="o">::</span><span class="n">EndDisabled</span><span class="p">();</span>
    <span class="c1">// spatializer radius control via slide and mouse scroll</span>
    <span class="n">ImGui</span><span class="o">::</span><span class="n">SetNextItemWidth</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">SliderFloat</span><span class="p">(</span><span class="s">"##Radius"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">m_radius</span><span class="p">,</span> <span class="mf">0.1</span><span class="n">f</span><span class="p">,</span> <span class="mf">2.0</span><span class="n">f</span><span class="p">,</span> <span class="s">"Radius = %.1f"</span><span class="p">))</span>
        <span class="n">m_spat</span><span class="p">.</span><span class="n">setRadius</span><span class="p">(</span><span class="n">m_radius</span><span class="p">);</span>
    <span class="kt">float</span> <span class="n">scroll</span> <span class="o">=</span> <span class="n">ImGui</span><span class="o">::</span><span class="n">GetIO</span><span class="p">().</span><span class="n">MouseWheel</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">scroll</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">m_radius</span> <span class="o">+=</span> <span class="n">scroll</span> <span class="o">*</span> <span class="mf">0.1</span><span class="n">f</span><span class="p">;</span>
        <span class="n">m_radius</span> <span class="o">=</span> <span class="n">clamp</span><span class="p">(</span><span class="n">m_radius</span><span class="p">,</span> <span class="mf">0.1</span><span class="n">f</span><span class="p">,</span> <span class="mf">2.0</span><span class="n">f</span><span class="p">);</span>
        <span class="n">m_spat</span><span class="p">.</span><span class="n">setRadius</span><span class="p">(</span><span class="n">m_radius</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// follow mode (i.e. target = mouse pos)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">Checkbox</span><span class="p">(</span><span class="s">"Follow Mouse"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">m_followMode</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m_followMode</span><span class="p">)</span>
            <span class="n">m_spat</span><span class="p">.</span><span class="n">play</span><span class="p">(</span><span class="n">m_sig</span><span class="p">);</span>
        <span class="k">else</span>
            <span class="n">m_spat</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="c1">// get current mouse pos</span>
    <span class="n">Vec2</span> <span class="n">mouse</span> <span class="o">=</span> <span class="n">ImGui</span><span class="o">::</span><span class="n">GetMousePos</span><span class="p">();</span>
    <span class="c1">// draw array graphics</span>
    <span class="n">drawArray</span><span class="p">();</span>
    <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p align="center">
    <img src="https://raw.githubusercontent.com/wiki/mahilab/Syntacts/images/tut-draw/controls.png" height="250" />
</p>

<p>Now, we need to appropriately update the Spatializer target position. Let’s first handle the “playback” mode. We need to collect users’ input as they draw the path on the array, and render the drawn paths:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">...</span>
    <span class="c1">// playback mode, allow user to draw paths</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">m_followMode</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m_arrayRect</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">mouse</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">m_playing</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">IsMouseClicked</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
                <span class="n">m_paths</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">IsMouseDown</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
                <span class="n">m_paths</span><span class="p">.</span><span class="n">back</span><span class="p">().</span><span class="n">push_back</span><span class="p">(</span><span class="n">mouse</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">drawPaths</span><span class="p">(</span><span class="n">Oranges</span><span class="o">::</span><span class="n">Orange</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="p">...</span>
</code></pre></div></div>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// Draws user's paths</span>
<span class="kt">void</span> <span class="nf">drawPaths</span><span class="p">(</span><span class="n">Color</span> <span class="n">col</span><span class="p">,</span> <span class="kt">float</span> <span class="n">thickness</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">auto</span><span class="o">&amp;</span> <span class="n">dl</span> <span class="o">=</span> <span class="o">*</span><span class="n">ImGui</span><span class="o">::</span><span class="n">GetWindowDrawList</span><span class="p">();</span>
    <span class="k">auto</span> <span class="n">col32</span> <span class="o">=</span> <span class="n">ImGui</span><span class="o">::</span><span class="n">ColorConvertFloat4ToU32</span><span class="p">(</span><span class="n">col</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">path</span> <span class="o">:</span> <span class="n">m_paths</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">dl</span><span class="p">.</span><span class="n">AddCircleFilled</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="o">*</span><span class="n">thickness</span><span class="p">,</span> <span class="n">col32</span><span class="p">,</span><span class="mi">32</span><span class="p">);</span>
            <span class="n">dl</span><span class="p">.</span><span class="n">AddPolyline</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">],(</span><span class="kt">int</span><span class="p">)</span><span class="n">path</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="n">col32</span><span class="p">,</span><span class="nb">false</span><span class="p">,</span><span class="n">thickness</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>As noted, our Play button calls <code class="highlighter-rouge">start_coroutine(playPaths())</code>. A coroutine is a function that can suspend execution by yielding control, and returning to the yield point upon the next frame. It’s an easy way to write “asynchronous” code without threads or other complicated mechanisms. Our coroutine is simple:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// Coroutine that plays back user's paths</span>
<span class="n">Enumerator</span> <span class="nf">playPaths</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">m_playing</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="n">m_spat</span><span class="p">.</span><span class="n">play</span><span class="p">(</span><span class="n">m_sig</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">path</span> <span class="o">:</span> <span class="n">m_paths</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">t</span> <span class="o">:</span> <span class="n">path</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">m_target_px</span> <span class="o">=</span> <span class="n">t</span><span class="p">;</span>
            <span class="k">auto</span> <span class="n">target</span> <span class="o">=</span> <span class="n">pixelToSpatial</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
            <span class="n">m_spat</span><span class="p">.</span><span class="n">setTarget</span><span class="p">(</span><span class="n">target</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">target</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
            <span class="c1">// yield control and return at the next frame</span>
            <span class="n">co_yield</span> <span class="nb">nullptr</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">m_spat</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
    <span class="n">m_playing</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">/// Converts a pixel position to Spatializer position</span>
<span class="n">Vec2</span> <span class="nf">pixelToSpatial</span><span class="p">(</span><span class="n">Vec2</span> <span class="n">in</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Vec2</span> <span class="n">pos</span><span class="p">;</span>
    <span class="n">pos</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">remap</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">in</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">m_tactorRect</span><span class="p">.</span><span class="n">tl</span><span class="p">().</span><span class="n">x</span><span class="p">,</span> <span class="n">m_tactorRect</span><span class="p">.</span><span class="n">br</span><span class="p">().</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">COLS</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">pos</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">remap</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">in</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">m_tactorRect</span><span class="p">.</span><span class="n">tl</span><span class="p">().</span><span class="n">y</span><span class="p">,</span> <span class="n">m_tactorRect</span><span class="p">.</span><span class="n">br</span><span class="p">().</span><span class="n">y</span><span class="p">,</span> <span class="n">ROWS</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">pos</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Next, we can handle the realtime “follow” mode in <code class="highlighter-rouge">update</code>:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">...</span>
    <span class="c1">// follow mode, allow user to set target pos with mouse cursor</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="n">m_target_px</span> <span class="o">=</span> <span class="n">mouse</span><span class="p">;</span>
        <span class="k">auto</span> <span class="n">target</span> <span class="o">=</span> <span class="n">pixelToSpatial</span><span class="p">(</span><span class="n">mouse</span><span class="p">);</span>
        <span class="n">m_spat</span><span class="p">.</span><span class="n">setTarget</span><span class="p">(</span><span class="n">target</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">target</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="p">...</span>
<span class="err">}</span>
</code></pre></div></div>

<p>Finally, we will write a function to draw the target position, whether set via the “playback” mode or the “follow” mode, and add it to <code class="highlighter-rouge">update</code>:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// Draws the current target position and size</span>
<span class="kt">void</span> <span class="nf">drawTarget</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">auto</span><span class="o">&amp;</span> <span class="n">dl</span> <span class="o">=</span> <span class="o">*</span><span class="n">ImGui</span><span class="o">::</span><span class="n">GetWindowDrawList</span><span class="p">();</span>
    <span class="kt">float</span> <span class="n">rad</span> <span class="o">=</span> <span class="n">m_radius</span> <span class="o">*</span> <span class="n">m_tactorRect</span><span class="p">.</span><span class="n">size</span><span class="p">().</span><span class="n">x</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">dl</span><span class="p">.</span><span class="n">PushClipRect</span><span class="p">(</span><span class="n">m_arrayRect</span><span class="p">.</span><span class="n">tl</span><span class="p">(),</span> <span class="n">m_arrayRect</span><span class="p">.</span><span class="n">br</span><span class="p">());</span>
    <span class="n">dl</span><span class="p">.</span><span class="n">AddCircleFilled</span><span class="p">(</span><span class="n">m_target_px</span><span class="p">,</span> <span class="n">rad</span><span class="p">,</span> <span class="n">IM_COL32</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">64</span><span class="p">),</span> <span class="mi">32</span><span class="p">);</span>
    <span class="n">dl</span><span class="p">.</span><span class="n">PopClipRect</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">...</span>
    <span class="c1">// drag target circle</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">m_followMode</span> <span class="o">||</span> <span class="n">m_playing</span><span class="p">)</span>
        <span class="n">drawTarget</span><span class="p">();</span>
    <span class="err">}</span>
<span class="err">}</span>
</code></pre></div></div>

<h2 id="the-final-application">The Final Application</h2>

<p>All of the code is complete, and we can now build the final application. If you got lost along the way, you can download the finished code from the <a href="https://github.com/mahilab/SyntactsDraw">GitHub repository</a>. Here are our two modes in action:</p>

<p align="center">
    <img src="https://raw.githubusercontent.com/wiki/mahilab/Syntacts/images/tut-draw/final.gif" height="900" />
</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>
  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p>Syntacts | The Tactor Synthesizer</p>
        <a href="https://mahilab.rice.edu" target="_blank">Mechatronics and Haptic Interfaces Lab</a>
      </div>
    </div>
  </div>
</footer>
</body>

</html>
